{"version":3,"sources":["webpack:///src/views/monitor/Httptrace.vue","webpack:///./src/views/monitor/Httptrace.vue?19ba","webpack:///./src/views/monitor/Httptrace.vue"],"names":["moment_default","a","locale","Httptrace","data","advanced","dataSource","pagination","defaultPageSize","defaultCurrent","pageSizeOptions","showQuickJumper","showSizeChanger","showTotal","total","range","loading","computed","columns","h","this","$createElement","title","dataIndex","customRender","text","row","index","format","attrs","color","filters","value","filterMultiple","onFilter","record","request","method","includes","split","mounted","fetch","methods","search","handleTableChange","sorter","_this","$get","then","r","filterData","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","traces","next","done","d","uri","indexOf","push","err","return","monitor_Httptrace","render","_vm","_h","_c","_self","staticClass","bordered","type","show-icon","slot","_v","_s","length","staticStyle","margin-left","on","click","scroll","x","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.a207c592c4d6df058c45.js","sourcesContent":["<template>\n  <a-card :bordered=\"false\" class=\"card-area\">\n    <div>\n      <div class=\"alert\">\n        <a-alert type=\"success\" :show-icon=\"true\">\n          <div slot=\"message\">\n            共追踪到 {{dataSource.length}} 条近期HTTP请求记录\n            <a style=\"margin-left: 24px\" @click=\"search\">点击刷新</a>\n          </div>\n        </a-alert>\n      </div>\n      <!-- 表格区域 -->\n      <a-table :columns=\"columns\"\n               :dataSource=\"dataSource\"\n               :pagination=\"pagination\"\n               :loading=\"loading\"\n               :scroll=\"{ x: 900 }\"\n               @change=\"handleTableChange\">\n      </a-table>\n    </div>\n  </a-card>\n</template>\n\n<script>\nimport moment from 'moment'\nmoment.locale('zh-cn')\n\nexport default {\n  data () {\n    return {\n      advanced: false,\n      dataSource: [],\n      pagination: {\n        defaultPageSize: 10,\n        defaultCurrent: 1,\n        pageSizeOptions: ['10', '20', '30', '40', '100'],\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      },\n      loading: false\n    }\n  },\n  computed: {\n    columns () {\n      return [{\n        title: '请求时间',\n        dataIndex: 'timestamp',\n        customRender: (text, row, index) => {\n          return moment(text).format('YYYY-MM-DD HH:mm:ss')\n        }\n      }, {\n        title: '请求方法',\n        dataIndex: 'request.method',\n        customRender: (text, row, index) => {\n          switch (text) {\n            case 'GET':\n              return <a-tag color=\"#87d068\">{text}</a-tag>\n            case 'POST':\n              return <a-tag color=\"#2db7f5\">{text}</a-tag>\n            case 'PUT':\n              return <a-tag color=\"#ffba5a\">{text}</a-tag>\n            case 'DELETE':\n              return <a-tag color=\"#f50\">{text}</a-tag>\n            default:\n              return text\n          }\n        },\n        filters: [\n          { text: 'GET', value: 'GET' },\n          { text: 'POST', value: 'POST' },\n          { text: 'PUT', value: 'PUT' },\n          { text: 'DELETE', value: 'DELETE' }\n        ],\n        filterMultiple: true,\n        onFilter: (value, record) => record.request.method.includes(value)\n      }, {\n        title: '请求URL',\n        dataIndex: 'request.uri',\n        customRender: (text, row, index) => {\n          return text.split('?')[0]\n        }\n      }, {\n        title: '响应状态',\n        dataIndex: 'response.status',\n        customRender: (text, row, index) => {\n          if (text < 200) {\n            return <a-tag color=\"pink\">{text}</a-tag>\n          } else if (text < 201) {\n            return <a-tag color=\"green\">{text}</a-tag>\n          } else if (text < 399) {\n            return <a-tag color=\"cyan\">{text}</a-tag>\n          } else if (text < 403) {\n            return <a-tag color=\"orange\">{text}</a-tag>\n          } else if (text < 501) {\n            return <a-tag color=\"red\">{text}</a-tag>\n          } else {\n            return text\n          }\n        }\n      }, {\n        title: '请求耗时',\n        dataIndex: 'timeTaken',\n        customRender: (text, row, index) => {\n          if (text < 500) {\n            return <a-tag color=\"green\">{text} ms</a-tag>\n          } else if (text < 1000) {\n            return <a-tag color=\"cyan\">{text} ms</a-tag>\n          } else if (text < 1500) {\n            return <a-tag color=\"orange\">{text} ms</a-tag>\n          } else {\n            return <a-tag color=\"red\">{text} ms</a-tag>\n          }\n        }\n      }]\n    }\n  },\n  mounted () {\n    this.fetch()\n  },\n  methods: {\n    search () {\n      this.fetch()\n    },\n    handleTableChange (pagination, filters, sorter) {\n      this.fetch()\n    },\n    fetch () {\n      this.loading = true\n      this.$get('actuator/httptrace').then((r) => {\n        let data = r.data\n        this.loading = false\n        let filterData = []\n        for (let d of data.traces) {\n          if (d.request.method !== 'OPTIONS' &&\n            d.request.uri.indexOf('httptrace') === -1) {\n            filterData.push(d)\n          }\n        }\n        this.dataSource = filterData\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import \"../../../static/less/Common\";\n  .alert {\n    margin-bottom: .5rem;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/monitor/Httptrace.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{staticClass:\"card-area\",attrs:{\"bordered\":false}},[_c('div',[_c('div',{staticClass:\"alert\"},[_c('a-alert',{attrs:{\"type\":\"success\",\"show-icon\":true}},[_c('div',{attrs:{\"slot\":\"message\"},slot:\"message\"},[_vm._v(\"\\n          共追踪到 \"+_vm._s(_vm.dataSource.length)+\" 条近期HTTP请求记录\\n          \"),_c('a',{staticStyle:{\"margin-left\":\"24px\"},on:{\"click\":_vm.search}},[_vm._v(\"点击刷新\")])])])],1),_vm._v(\" \"),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"scroll\":{ x: 900 }},on:{\"change\":_vm.handleTableChange}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53780da6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/monitor/Httptrace.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-53780da6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Httptrace.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Httptrace.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Httptrace.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53780da6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Httptrace.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-53780da6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/monitor/Httptrace.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}